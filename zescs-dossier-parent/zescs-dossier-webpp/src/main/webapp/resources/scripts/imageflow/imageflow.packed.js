/*
Name:       ImageFlow
Version:    1.3.0 (March 9 2010)
Author:     Finn Rudolph
Support:    http://finnrudolph.de/ImageFlow

License:    ImageFlow is licensed under a Creative Commons 
            Attribution-Noncommercial 3.0 Unported License 
            (http://creativecommons.org/licenses/by-nc/3.0/).

            You are free:
                + to Share - to copy, distribute and transmit the work
                + to Remix - to adapt the work

            Under the following conditions:
                + Attribution. You must attribute the work in the manner specified by the author or licensor 
                  (but not in any way that suggests that they endorse you or your use of the work). 
                + Noncommercial. You may not use this work for commercial purposes. 

            + For any reuse or distribution, you must make clear to others the license terms of this work.
            + Any of the above conditions can be waived if you get permission from the copyright holder.
            + Nothing in this license impairs or restricts the author's moral rights.

Credits:    This script is based on Michael L. Perrys Cover flow in Javascript [1].
            The reflections are generated server-sided by a slightly hacked version 
            of Richard Daveys easyreflections [2] written in PHP. The mouse wheel 
            support is an implementation of Adomas Paltanavicius JavaScript mouse 
            wheel code [3]. It also uses the domReadyEvent from Tanny O'Haley [4].

            [1] http://www.adventuresinsoftware.com/blog/?p=104#comment-1981
            [2] http://reflection.corephp.co.uk/v2.php
            [3] http://adomas.org/javascript-mouse-wheel/
            [4] http://tanny.ica.com/ICA/TKO/tkoblog.nsf/dx/domcontentloaded-for-browsers-part-v
*/

/* ImageFlow - compressed with http://dean.edwards.name/packer/ */
eval(function(p,a,c,k,e,r){e=function(c){return(c<62?'':e(parseInt(c/62)))+((c=c%62)>35?String.fromCharCode(c+29):c.toString(36))};if('0'.replace(0,e)==0){while(c--)r[e(c)]=k[c];k=[function(e){return r[e]||e}];e=function(){return'([79a-dfgj-nq-vyA-Z]|[1-4]\\w)'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('d ImageFlow(){a.2f={3l:50,2Q:1.964,2R:g,3m:l,16:g,3n:\'1G\',K:\'imageflow\',2g:1.0,A:4,3o:\'\',2h:l,3p:0.67,3q:1.0,2S:d(){m.location=a.2i},1U:g,1V:[10,8,6,4,2],2T:118,2U:17,3r:l,2V:l,reflectionGET:\'\',1W:0.5,3s:g,reflectPath:\'\',3t:0.6,2W:l,3u:\'e-resize\',1t:14,1u:g,3v:1500,3w:g,3x:1,3y:l,3z:g,1b:150};b 7=a;a.P=d(2j){Y(b 1j in 7.2f){a[1j]=(2j!==1v&&2j[1j]!==1v)?2j[1j]:7.2f[1j]}b r=m.L(7.K);9(r){r.k.1H=\'2k\';a.r=r;9(a.3B()){a.q=m.L(7.K+\'_images\');a.1I=m.L(7.K+\'_caption\');a.1c=m.L(7.K+\'_navigation\');a.Z=m.L(7.K+\'_scrollbar\');a.1w=m.L(7.K+\'_slider\');a.2l=m.L(7.K+\'_next\');a.2m=m.L(7.K+\'_previous\');a.1X=m.L(7.K+\'_slideshow\');a.1Y=[];a.1x=0;a.f=0;a.18=0;a.1J=0;a.2n=l;a.2o=l;a.I=g;b 1d=a.r.3C;b Q=R.V(1d/7.2Q);m.L(7.K+\'2X\').k.3D=((Q*0.5)-22)+\'D\';r.k.Q=Q+\'D\';a.2p()}}};a.3B=d(){b q=7.n.N(\'W\',\'2q\');b E,3E,1K,11;b j=7.r.s.1y;Y(b u=0;u<j;u++){E=7.r.s[u];9(E&&E.2r==1&&E.2s==\'2t\'){9(7.2V===l){3E=(7.3s)?\'3\':\'2\';1K=7.3o+E.1z(\'1K\',2);E.2u(\'1K\',1K)}11=E.1Z(l);q.J(11)}}9(7.16){b 1L=7.n.N(\'W\',\'2q\');b 1k=7.n.N(\'W\',\'2q\');j=q.s.1y;9(j<7.A){7.A=j}9(j>1){b i;Y(i=0;i<j;i++){E=q.s[i];9(i<7.A){11=E.1Z(l);1L.J(11)}9(j-i<7.A+1){11=E.1Z(l);1k.J(11)}}Y(i=0;i<j;i++){E=q.s[i];11=E.1Z(l);1k.J(11)}Y(i=0;i<7.A;i++){E=1L.s[i];11=E.1Z(l);1k.J(11)}q=1k}}9(7.1u){b 3F=7.n.N(\'W\',\'1u\');q.J(3F)}b 1M=7.n.N(\'p\',\'loading_txt\');b 3G=m.3H(\' \');1M.J(3G);b 2Y=7.n.N(\'W\',\'3I\');b 3J=7.n.N(\'W\',\'loading_bar\');2Y.J(3J);b 1I=7.n.N(\'W\',\'20\');b Z=7.n.N(\'W\',\'scrollbar\');b 1w=7.n.N(\'W\',\'2W\');Z.J(1w);9(7.2R){b 2m=7.n.N(\'W\',\'previous\',\'3K\');b 2l=7.n.N(\'W\',\'next\',\'3K\');Z.J(2m);Z.J(2l)}b 1c=7.n.N(\'W\',\'navigation\');1c.J(1I);1c.J(Z);b 2Z=g;9(7.r.J(q)&&7.r.J(1M)&&7.r.J(2Y)&&7.r.J(1c)){j=7.r.s.1y;Y(u=0;u<j;u++){E=7.r.s[u];9(E&&E.2r==1&&E.2s==\'2t\'){7.r.removeChild(E)}}2Z=l}O 2Z};a.2p=d(){b p=7.3L();9((p<17||7.2o)&&7.3r){9(7.2o&&p==17){7.2o=g;B.1l(7.2p,17)}t{B.1l(7.2p,40)}}t{m.L(7.K+\'2X\').k.21=\'30\';m.L(7.K+\'_loading\').k.21=\'30\';B.1l(7.n.3M,1000);7.2v();9(7.j>1){7.1e.P();7.v.P();7.C.P();7.2w.P();9(7.1u){7.G.P()}9(7.2W){7.Z.k.1H=\'2k\'}}}};a.3L=d(){b j=7.q.s.1y;b i=0,23=0;b c=S;Y(b u=0;u<j;u++){c=7.q.s[u];9(c&&c.2r==1&&c.2s==\'2t\'){9(c.31){23++}i++}}b 24=R.V((23/i)*17);b 3N=m.L(7.K+\'_loading_bar\');3N.k.1d=24+\'%\';9(7.16){i=i-(7.A*2);23=(24<1)?0:R.V((i/17)*24)}b 1M=m.L(7.K+\'2X\');b 3O=m.3H(\'3I 2q \'+23+\'/\'+i);1M.replaceChild(3O,1M.firstChild);O 24};a.2v=d(){a.T=7.q.3C+7.q.3P;a.1A=R.V(7.T/7.2Q);a.25=7.A*7.1b;a.1N=7.T*0.5;a.1t=7.1t*0.5;a.1f=(7.T-(R.V(7.1t)*2))*7.3t;a.2x=R.V(7.1A*7.3p);7.r.k.Q=7.1A+\'D\';7.q.k.Q=7.2x+\'D\';7.1c.k.Q=(7.1A-7.2x)+\'D\';7.1I.k.1d=7.T+\'D\';7.1I.k.3D=R.V(7.T*0.02)+\'D\';7.Z.k.1d=7.1f+\'D\';7.Z.k.marginTop=R.V(7.T*0.02)+\'D\';7.Z.k.32=R.V(7.1t+((7.T-7.1f)/2))+\'D\';7.1w.k.3R=7.3u;7.1w.onmousedown=d(){7.v.1B(a);O g};9(7.2R){7.2m.1m=d(){7.1e.19(1)};7.2l.1m=d(){7.1e.19(-1)}}b 3S=(7.2V===l)?7.1W+1:1;b j=7.q.s.1y;b i=0;b c=S;Y(b u=0;u<j;u++){c=7.q.s[u];9(c!==S&&c.2r==1&&c.2s==\'2t\'){a.1Y[i]=u;c.2i=c.1z(\'longdesc\');c.xPosition=(-i*7.1b);c.i=i;9(7.2n){9(c.1z(\'1d\')!==S&&c.1z(\'Q\')!==S){c.w=c.1z(\'1d\');c.h=c.1z(\'Q\')*3S}t{c.w=c.1d;c.h=c.Q}}9((c.w)>(c.h/(7.1W+1))){c.pc=7.2T;c.2y=7.2T}t{c.pc=7.2U;c.2y=7.2U}9(7.2h===g){c.k.position=\'relative\';c.k.21=\'inline\'}c.k.3R=7.3n;i++}}a.j=7.1Y.1y;9(7.2h===g){c=7.q.s[7.1Y[0]];a.3T=c.w*7.j;c.k.paddingLeft=(7.T/2)+(c.w/2)+\'D\';7.q.k.Q=c.h+\'D\';7.1c.k.Q=(7.1A-c.h)+\'D\'}9(7.2n){7.2n=g;7.f=7.3x-1;9(7.f<0){7.f=0}9(7.16){7.f=7.f+7.A}33=(7.16)?(7.j-(7.A))-1:7.j-1;9(7.f>33){7.f=33}9(7.3y===g){7.1O(-7.f*7.1b)}9(7.3z){7.1O(5000)}}9(7.j>1){7.1P(7.f)}7.1O(7.1x)};a.1O=d(x){a.1x=x;a.1n=7.j;Y(b u=0;u<7.j;u++){b c=7.q.s[7.1Y[u]];b 26=u*-7.1b;9(7.2h){9((26+7.25)<7.1J||(26-7.25)>7.1J){c.k.1H=\'3U\';c.k.21=\'30\'}t{b z=(R.sqrt(10000+x*x)+17)*7.3q;b xs=x/z*7.1N+7.1N;c.k.21=\'block\';b 1o=(c.h/c.w*c.pc)/z*7.1N;b 27=0;1Q(1o>7.1A){1C g:27=c.pc/z*7.1N;X;1G:1o=7.1A;27=c.w*1o/c.h;X}b 3W=(7.2x-1o)+((1o/(7.1W+1))*7.1W);c.k.3X=xs-(c.pc/2)/z*7.1N+\'D\';9(27&&1o){c.k.Q=1o+\'D\';c.k.1d=27+\'D\';c.k.top=3W+\'D\'}c.k.1H=\'2k\';1Q(x<0){1C l:a.1n++;X;1G:a.1n=7.1n-1;X}1Q(c.i==7.f){1C g:c.1m=d(){7.1P(a.i)};X;1G:a.1n=7.1n+1;9(c.2i!==\'\'){c.1m=7.2S}X}c.k.1n=7.1n}}t{9((26+7.25)<7.1J||(26-7.25)>7.1J){c.k.1H=\'3U\'}t{c.k.1H=\'2k\';1Q(c.i==7.f){1C g:c.1m=d(){7.1P(a.i)};X;1G:9(c.2i!==\'\'){c.1m=7.2S}X}}7.q.k.32=(x-7.3T)+\'D\'}x+=7.1b}};a.1P=d(f){b 28,1D;9(7.16){9(f+1===7.A){1D=7.j-7.A;28=-1D*7.1b;f=1D-1}9(f===(7.j-7.A)){1D=7.A-1;28=-1D*7.1b;f=1D+1}}b x=-f*7.1b;a.18=x;a.1J=x;a.f=f;b 20=7.q.s[f].1z(\'alt\');9(20===\'\'||7.3m===g){20=\'&nbsp;\'}7.1I.innerHTML=20;9(7.v.I===g){9(7.16){a.1a=((f-7.A)*7.1f)/(7.j-(7.A*2)-1)-7.v.F}t{a.1a=(f*7.1f)/(7.j-1)-7.v.F}7.1w.k.32=(7.1a-7.1t)+\'D\'}9(7.1U===l||7.2g!==7.2f.2g){7.n.2z(7.q.s[f],7.1V[0]);7.q.s[f].pc=7.q.s[f].pc*7.2g;b 29=0;b 1R=0;b 1S=0;b 1k=7.1V.1y;Y(b i=1;i<(7.A+1);i++){9((i+1)>1k){29=7.1V[1k-1]}t{29=7.1V[i]}1R=f+i;1S=f-i;9(1R<7.j){7.n.2z(7.q.s[1R],29);7.q.s[1R].pc=7.q.s[1R].2y}9(1S>=0){7.n.2z(7.q.s[1S],29);7.q.s[1S].pc=7.q.s[1S].2y}}}9(28){7.1O(28)}9(7.I===g){7.I=l;7.34()}};a.34=d(){1Q(7.18<7.1x-1||7.18>7.1x+1){1C l:7.1O(7.1x+(7.18-7.1x)/3);B.1l(7.34,7.3l);7.I=l;X;1G:7.I=g;X}};a.2A=d(f){9(7.1u){7.G.2B()}7.1P(f)};a.G={2C:1,P:d(){(7.3w)?7.G.1B():7.G.1h()},2B:d(){7.n.35(7.r,\'3Y\',7.G.2B);7.G.1h()},3Z:d(){7.n.12(7.r,\'3Y\',7.G.2B)},1B:d(){7.n.2D(7.1X,\'1u pause\');7.1X.1m=d(){7.G.1h()};7.G.41=B.setInterval(7.G.36,7.3v);B.1l(7.G.3Z,17)},1h:d(){7.n.2D(7.1X,\'1u play\');7.1X.1m=d(){7.G.1B()};B.clearInterval(7.G.41)},36:d(){b 1p=7.f+7.G.2C;b 2E=g;9(1p===7.j){7.G.2C=-1;2E=l}9(1p<0){7.G.2C=1;2E=l}(2E)?7.G.36():7.1P(1p)}};a.1e={P:d(){9(B.1q){7.r.1q(\'DOMMouseScroll\',7.1e.2a,g)}7.n.12(7.r,\'mousewheel\',7.1e.2a)},2a:d(y){b 1E=0;9(!y){y=B.y}9(y.42){1E=y.42/120}t 9(y.43){1E=-y.43/3}9(1E){7.1e.19(1E)}7.n.2F(y)},19:d(1E){b 2G=g;b 1p=0;9(1E>0){9(7.f>=1){1p=7.f-1;2G=l}}t{9(7.f<(7.j-1)){1p=7.f+1;2G=l}}9(2G){7.2A(1p)}}};a.v={1r:S,38:0,2H:0,F:0,I:g,P:d(){7.n.12(7.r,\'mousemove\',7.v.44);7.n.12(7.r,\'45\',7.v.1h);7.n.12(m,\'45\',7.v.1h);7.r.onselectstart=d(){b 3a=l;9(7.v.I){3a=g}O 3a}},1B:d(o){7.v.1r=o;7.v.38=7.v.2H-o.3P+7.1a},1h:d(){7.v.1r=S;7.v.I=g},44:d(e){b 2I=0;9(!e){e=B.y}9(e.3b){2I=e.3b}t 9(e.46){2I=e.46+m.3c.47+m.documentElement.47}7.v.2H=2I;9(7.v.1r!==S){b F=(7.v.2H-7.v.38)+7.1t;9(F<(-7.1a)){F=-7.1a}9(F>(7.1f-7.1a)){F=7.1f-7.1a}b 2b,f;9(7.16){2b=(F+7.1a)/(7.1f/(7.j-(7.A*2)-1));f=R.V(2b)+7.A}t{2b=(F+7.1a)/(7.1f/(7.j-1));f=R.V(2b)}7.v.F=F;7.v.1r.k.3X=F+\'D\';9(7.f!==f){7.2A(f)}7.v.I=l}}};a.C={x:0,3d:0,2J:0,I:g,1L:l,P:d(){7.n.12(7.1c,\'touchstart\',7.C.1B);7.n.12(m,\'touchmove\',7.C.19);7.n.12(m,\'touchend\',7.C.1h)},48:d(e){b 3e=g;9(e.2K){b 18=e.2K[0].18;9(18===7.1c||18===7.1w||18===7.Z){3e=l}}O 3e},3f:d(e){b x=0;9(e.2K){x=e.2K[0].3b}O x},1B:d(e){7.C.3d=7.C.3f(e);7.C.I=l;7.n.2F(e)},49:d(){b I=g;9(7.C.I){I=l}O I},19:d(e){9(7.C.49&&7.C.48(e)){b j=(7.16)?(7.j-(7.A*2)-1):(7.j-1);9(7.C.1L){7.C.2J=(j-7.f)*(7.T/j);7.C.1L=g}b F=-(7.C.3f(e)-7.C.3d-7.C.2J);9(F<0){F=0}9(F>7.T){F=7.T}7.C.x=F;b f=R.V(F/(7.T/j));f=j-f;9(7.f!==f){9(7.16){f=f+7.A}7.2A(f)}7.n.2F(e)}},1h:d(){7.C.2J=7.C.x;7.C.I=g}};a.2w={P:d(){m.onkeydown=d(y){7.2w.19(y)}},19:d(y){b 4a=7.2w.2a(y);1Q(4a){1C 39:7.1e.19(-1);X;1C 37:7.1e.19(1);X}},2a:d(y){y=y||B.y;O y.keyCode}};a.n={12:d(H,M,U){9(H.1q){H.1q(M,U,g)}t 9(H.4b){H["e"+M+U]=U;H[M+U]=d(){H["e"+M+U](B.y)};H.4b("on"+M,H[M+U])}},35:d(H,M,U){9(H.4d){H.4d(M,U,g)}t 9(H.4e){9(H[M+U]===1v){alert(\'n.35 » Pointer to 4g y is 1v - perhaps you are trying to 4g an unattached y?\')}H.4e(\'on\'+M,H[M+U]);H[M+U]=S;H[\'e\'+M+U]=S}},2z:d(1r,3g){9(7.1U===l){1r.k.1U=3g/10;1r.k.filter=\'alpha(1U=\'+3g*10+\')\'}},N:d(M,id,3h){b 1s=m.createElement(M);1s.2u(\'id\',7.K+\'_\'+id);9(3h!==1v){id+=\' \'+3h}7.n.2D(1s,id);O 1s},2D:d(1s,2L){9(1s){1s.2u(\'class\',2L);1s.2u(\'2L\',2L)}},2F:d(e){9(e.4h){e.4h()}t{e.returnValue=g}O g},3M:d(){b 3i=B.2M;9(2c B.2M!=\'d\'){B.2M=d(){7.2v()}}t{B.2M=d(){9(3i){3i()}7.2v()}}}}}b 1i={1j:"1i",2d:{},1F:1,2e:g,3j:S,4i:d(13){9(!13.$$1F){13.$$1F=a.1F++;9(a.2e){13()}a.2d[13.$$1F]=13}},remove:d(13){9(13.$$1F){delete a.2d[13.$$1F]}},15:d(){9(a.2e){O}a.2e=l;Y(b i in a.2d){a.2d[i]()}},2N:d(){9(a.2e){O}9(/KHTML|WebKit/i.4j(navigator.userAgent)){9(/loaded|31/.4j(m.4k)){a.15()}t{1l(a.1j+".2N()",17)}}t 9(m.L("3k")){O l}9(2c a.3j==="d"){9(2c m.4l!==\'1v\'&&(m.4l(\'3c\')[0]!==S||m.3c!==S)){9(a.3j()){a.15()}t{1l(a.1j+".2N()",250)}}}O l},P:d(){9(m.1q){m.1q("DOMContentLoaded",d(){1i.15()},g)}1l("1i.2N()",17);d 15(){1i.15()}9(2c 12!=="1v"){12(B,"4m",15)}t 9(m.1q){m.1q("4m",15,g)}t 9(2c B.2O==="d"){b 4n=B.2O;B.2O=d(){1i.15();4n()}}t{B.2O=15}/*@cc_on @9(@_win32||@_win64)m.write("<2P id=3k defer 1K=\\"//:\\"><\\/2P>");b 2P=m.L("3k");2P.onreadystatechange=d(){9(a.4k=="31"){1i.15()}};@end @*/}};b domReady=d(13){1i.4i(13)};1i.P();',[],272,'|||||||my||if|this|var|image|function||imageID|false|||max|style|true|document|Helper|||imagesDiv|ImageFlowDiv|childNodes|else|index|MouseDrag|||event||imageFocusMax|window|Touch|px|node|newX|Slideshow|obj|busy|appendChild|ImageFlowID|getElementById|type|createDocumentElement|return|init|height|Math|null|imagesDivWidth|fn|round|div|break|for|scrollbarDiv||imageNode|addEvent|handler||run|circular|100|target|handle|newSliderX|xStep|navigationDiv|width|MouseWheel|scrollbarWidth||stop|domReadyEvent|name|last|setTimeout|onclick|zIndex|newImageH|newImageID|addEventListener|object|element|sliderWidth|slideshow|undefined|sliderDiv|current|length|getAttribute|maxHeight|start|case|clonedImageID|delta|domReadyID|default|visibility|captionDiv|memTarget|src|first|loadingP|size|moveTo|glideTo|switch|rightID|leftID||opacity|opacityArray|reflectionP|buttonSlideshow|indexArray|cloneNode|caption|display||completed|finished|maxFocus|currentImage|newImageW|jumpTarget|opacityValue|get|step|typeof|events|bDone|defaults|imageFocusM|imageScaling|url|options|visible|buttonNextDiv|buttonPreviousDiv|firstRefresh|firstCheck|loadingProgress|images|nodeType|nodeName|IMG|setAttribute|refresh|Key|imagesDivHeight|pcMem|setOpacity|glideOnEvent|interrupt|direction|setClassName|reverseDirection|suppressBrowserDefault|change|mouseX|posx|stopX|touches|className|onresize|schedule|onload|script|aspectRatio|buttons|onClick|percentLandscape|percentOther|reflections|slider|_loading_txt|loadingDiv|success|none|complete|marginLeft|maxId|animate|removeEvent|slide||objectX||selection|pageX|body|startX|state|getX|value|optionalClass|otherFunctions|DOMContentLoadedCustom|__ie_onload|animationSpeed|captions|imageCursor|imagePath|imagesHeight|imagesM|preloadImages|reflectionPNG|scrollbarP|sliderCursor|slideshowSpeed|slideshowAutoplay|startID|glideToStartID|startAnimation||createStructure|offsetWidth|paddingTop|version|slideshowButton|loadingText|createTextNode|loading|loadingBarDiv|button|loadingStatus|addResizeEvent|loadingBar|loadingTxt|offsetLeft||cursor|multi|totalImagesWidth|hidden||newImageTop|left|click|addInterruptEvent||action|wheelDelta|detail|drag|mouseup|clientX|scrollLeft|isOnNavigationDiv|isBusy|charCode|attachEvent||removeEventListener|detachEvent||detach|preventDefault|add|test|readyState|getElementsByTagName|load|oldonload'.split('|'),0,{}))
/* Create ImageFlow instances when the DOM structure has been loaded */
domReady(function (){
    var instanceOne = new ImageFlow();
    instanceOne.init({ ImageFlowID: 'fileImageFlow',captions: true,slider: true});
});
